<!DOCTYPE html>
<html>
<head>
    <title>Grocery Store</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f7f9fc;
        }

        .product-card {
            border-radius: 18px;
            transition: all 0.3s ease;
            background: white;
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.12);
        }

        .product-img {
            height: 180px;
            object-fit: contain;
            padding: 15px;
        }

        .price {
            font-size: 18px;
            font-weight: 600;
            color: #28a745;
        }

        .add-btn {
            border-radius: 30px;
            font-weight: 500;
        }

        .navbar-brand {
            font-size: 22px;
        }
    </style>
    <style>
            .section-title {
            font-weight: 600;
            letter-spacing: 0.3px;
        }

        .hero-box {
            background: linear-gradient(135deg, #28a745, #43d17a);
            border-radius: 20px;
            padding: 30px;
            color: white;
            margin-bottom: 30px;
        }

        .hero-box h3 {
            font-weight: 600;
        }

        .hero-box p {
            opacity: 0.9;
        }
    </style>

</head>


<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-success px-4">
    <div class="container-fluid d-flex justify-content-between">

        <span class="navbar-brand fw-bold">
            üõí My Grocery Store
        </span>

        <div>
    <a href="/cart" class="btn btn-light btn-sm me-2 position-relative">
        View Cart üõí

        {% if cart_count > 0 %}
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                {{ cart_count }}
            </span>
        {% endif %}
    </a>

     <a href="/wishlist" class="btn btn-light btn-sm me-2">
                ‚ù§Ô∏è Wishlist
    </a>

    <a href="/orders" class="btn btn-light btn-sm me-2">
        My Orders üì¶
    </a>

    {% if user_name %}
        <span class="text-white me-2">Hello, {{ user_name }}</span>
        <a href="/logout" class="btn btn-light btn-sm">Logout</a>
    {% else %}
        <a href="/login" class="btn btn-light btn-sm me-2">Login</a>
        <a href="/register" class="btn btn-warning btn-sm">Register</a>
    {% endif %}
</div>


    </div>
</nav>

<!-- MAIN CONTENT -->
<div class="container mt-4">

    <!-- SEARCH BAR -->
    <form method="GET" action="/" class="mb-4">

        <div class="input-group shadow-sm">

            <input
                type="text"
                name="search"
                class="form-control rounded-start-pill"
                placeholder="Search for fruits, vegetables, groceries..."
                value="{{ search_query or '' }}"
            >

            <button
                class="btn btn-success rounded-end-pill px-4"
                type="submit">
                üîç Search
            </button>

        </div>

    </form>

    <div class="hero-box text-center">
        <h3>Fresh groceries delivered to your door üõí</h3>
        <p>Fast ‚Ä¢ Affordable ‚Ä¢ Reliable</p>
    </div>

    <div class="d-flex justify-content-center gap-3 mb-4 flex-wrap">

        <a href="/" class="btn btn-outline-success rounded-pill px-4">
            All
        </a>

        <a href="/?category=Fruits" class="btn btn-outline-success rounded-pill px-4">
            üçé Fruits
        </a>

        <a href="/?category=Vegetables" class="btn btn-outline-success rounded-pill px-4">
            ü•¶ Vegetables
        </a>

        <a href="/?category=Dairy" class="btn btn-outline-success rounded-pill px-4">
            ü•õ Dairy
        </a>

        <a href="/?category=Grains" class="btn btn-outline-success rounded-pill px-4">
            üåæ Grains
        </a>

</div>

    <div class="row">

    {% if products|length == 0 %}
        <div class="col-12 text-center mt-5">

            <img src="/static/images/empty-search.png"
                 style="max-width:220px; opacity:0.8;">

            <h5 class="mt-3 text-muted">
                No products found üòî
            </h5>

            <p class="text-secondary">
                Try searching something else
            </p>

        </div>
    {% endif %}

    {% for product in products %}

<div class="col-md-3 mb-4">

    <div class="card product-card h-100 border-0 position-relative">

        <a href="/toggle-wishlist/{{ product.id }}"
            class="position-absolute top-0 end-0 m-2 fs-4 text-decoration-none">

                {% if product.id in wishlist_ids %}
                    ‚ù§Ô∏è
                {% else %}
                    ü§ç
                {% endif %}

        </a>


        <a href="/product/{{ product.id }}">
        <img 
            src="{{ url_for('static', filename=product.image_url) }}"
            class="product-img mx-auto d-block"
            alt="{{ product.name }}"
        >
    </a>



        <div class="card-body text-center">

            <h6 class="fw-semibold mb-1">
            <a href="/product/{{ product.id }}" class="text-dark text-decoration-none">
                {{ product.name }}
            </a>
        </h6>


            <div class="price mb-3">
                ‚Çπ {{ product.price }}
            </div>

            <a href="/add-to-cart/{{ product.id }}"
               class="btn btn-success w-100 add-btn">
                Add to Cart üõí
            </a>

           


        </div>
    </div>

</div>
{% endfor %}
    </div>
</div>
</body>
</html>
