<!DOCTYPE html>
<html>
<head>
    <title>All Orders</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body style="background:#f4f6f9;">

<div class="container mt-5">

    <h2 class="mb-4 fw-bold">ðŸ“¦ All Orders</h2>

    {% for order in orders %}
    <div class="card mb-4 shadow-sm">

        <div class="card-header bg-dark text-white">
            <strong>Order ID:</strong> {{ order.id }} |
            <strong>Customer:</strong> {{ order.customer_name }} |
            <strong>Total:</strong> â‚¹ {{ order.total_amount }} |
            <strong>Date:</strong> {{ order.created_at }}
        </div>

        <div class="card-body">

    <table class="table table-bordered">
        <thead class="table-light">
            <tr>
                <th>Product</th>
                <th>Qty</th>
                <th>Price</th>
            </tr>
        </thead>

        <tbody>
            {% for item in order.order_items %}
            <tr>
                <td>{{ item.product_name }}</td>
                <td>{{ item.quantity }}</td>
                <td>â‚¹ {{ item.price }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- âœ… ORDER STATUS SECTION -->
    <form action="/admin/update-order-status" method="POST" class="d-flex">

        <input type="hidden" name="order_id" value="{{ order.id }}">

        <select name="status" class="form-select me-2">
            <option value="Pending" {% if order.status == 'Pending' %}selected{% endif %}>Pending</option>
            <option value="Delivering" {% if order.status == 'Delivering' %}selected{% endif %}>Delivering</option>
            <option value="Delivered" {% if order.status == 'Delivered' %}selected{% endif %}>Delivered</option>
        </select>

        <button type="submit" class="btn btn-sm btn-primary">
            Update
        </button>

    </form>


</div>
>

    </div>
    {% endfor %}

</div>

</body>
</html>
